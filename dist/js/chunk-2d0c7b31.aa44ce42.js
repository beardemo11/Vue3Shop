(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c7b31"],{5275:function(e,t,c){"use strict";c.r(t);c("b0c0");var o=c("7a23"),a={class:"container"},r={class:"row mt-4"},n={class:"col-md-7"},l={class:"table align-middle"},s=Object(o["createVNode"])("thead",null,[Object(o["createVNode"])("tr",null,[Object(o["createVNode"])("th",null,"圖片"),Object(o["createVNode"])("th",null,"商品名稱"),Object(o["createVNode"])("th",null,"價格"),Object(o["createVNode"])("th")])],-1),d={style:{width:"200px"}},i={href:"#",class:"text-dark"},u={key:0,class:"h5"},b={key:1,class:"h6"},p={key:2,class:"h5"},m={class:"btn-group btn-group-sm"},O={key:0,class:"spinner-grow text-danger spinner-grow-sm",role:"status"},j=Object(o["createVNode"])("span",{class:"visually-hidden"},"Loading...",-1),V=Object(o["createTextVNode"])(" 加到購物車 "),h={class:"col-md-5"},g={class:"sticky-top"},N={class:"table align-middle"},f=Object(o["createVNode"])("thead",null,[Object(o["createVNode"])("tr",null,[Object(o["createVNode"])("th"),Object(o["createVNode"])("th",null,"品名"),Object(o["createVNode"])("th",{style:{width:"110px"}},"數量"),Object(o["createVNode"])("th",null,"單價")])],-1),v=Object(o["createVNode"])("i",{class:"bi bi-x"},null,-1),k={key:0,class:"text-success"},y={class:"input-group input-group-sm"},C={class:"input-group-text"},x={class:"text-end"},B={key:0,class:"text-success"},w=Object(o["createVNode"])("td",{colspan:"3",class:"text-end"},"總計",-1),I={class:"text-end"},L={key:0},_=Object(o["createVNode"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),S={class:"text-end text-success"},$={class:"input-group mb-3 input-group-sm"},D={class:"input-group-append"},q={class:"my-5 row justify-content-center"},U={class:"mb-3"},M=Object(o["createVNode"])("label",{for:"email",class:"form-label"},"Email",-1),T={class:"mb-3"},F=Object(o["createVNode"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),P={class:"mb-3"},E=Object(o["createVNode"])("label",{for:"tel",class:"form-label"},"收件人電話",-1),J={class:"mb-3"},z=Object(o["createVNode"])("label",{for:"address",class:"form-label"},"收件人地址",-1),A={class:"mb-3"},G=Object(o["createVNode"])("label",{for:"message",class:"form-label"},"留言",-1),H=Object(o["createVNode"])("div",{class:"text-end"},[Object(o["createVNode"])("button",{class:"btn btn-danger"},"送出訂單")],-1);function K(e,t,c,K,Q,R){var W=this,X=Object(o["resolveComponent"])("Loading"),Y=Object(o["resolveComponent"])("Field"),Z=Object(o["resolveComponent"])("ErrorMessage"),ee=Object(o["resolveComponent"])("Form");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(X,{active:e.isLoading},null,8,["active"]),Object(o["createVNode"])("div",a,[Object(o["createVNode"])("div",r,[Object(o["createVNode"])("div",n,[Object(o["createVNode"])("table",l,[s,Object(o["createVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(Q.products,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("tr",{key:e.id},[Object(o["createVNode"])("td",d,[Object(o["createVNode"])("div",{style:[{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:"url(".concat(e.imageUrl,")")}]},null,4)]),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("a",i,Object(o["toDisplayString"])(e.title),1)]),Object(o["createVNode"])("td",null,[e.price?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])("div",u,Object(o["toDisplayString"])(e.origin_price)+" 元 ",1)),e.price?(Object(o["openBlock"])(),Object(o["createBlock"])("del",b,"原價 "+Object(o["toDisplayString"])(e.origin_price)+" 元",1)):Object(o["createCommentVNode"])("",!0),e.price?(Object(o["openBlock"])(),Object(o["createBlock"])("div",p," 現在只要 "+Object(o["toDisplayString"])(e.price)+" 元 ",1)):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("div",m,[Object(o["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:function(t){return R.getProduct(e.id)}}," 查看更多 ",8,["onClick"]),Object(o["createVNode"])("button",{type:"button",class:"btn btn-outline-danger",disabled:W.status.loadingItem===e.id,onClick:function(t){return R.addCart(e.id)}},[W.status.loadingItem===e.id?(Object(o["openBlock"])(),Object(o["createBlock"])("div",O,[j])):Object(o["createCommentVNode"])("",!0),V],8,["disabled","onClick"])])])])})),128))])])]),Object(o["createVNode"])("div",h,[Object(o["createVNode"])("div",g,[Object(o["createVNode"])("table",N,[f,Object(o["createVNode"])("tbody",null,[Q.cart.carts?(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],{key:0},Object(o["renderList"])(Q.cart.carts,(function(t){return Object(o["openBlock"])(),Object(o["createBlock"])("tr",{key:t.id},[Object(o["createVNode"])("td",null,[Object(o["createVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:Q.status.loadingItem===t.id,onClick:function(e){return R.removeCartItem(t.id)}},[v],8,["disabled","onClick"])]),Object(o["createVNode"])("td",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.product.title)+" ",1),t.coupon?(Object(o["openBlock"])(),Object(o["createBlock"])("div",k," 已套用優惠券 ")):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("div",y,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"number",class:"form-control",min:"1",disabled:t.id===Q.status.loadingItem,onChange:function(e){return R.updateCart(t)},"onUpdate:modelValue":function(e){return t.qty=e}},null,40,["disabled","onChange","onUpdate:modelValue"]),[[o["vModelText"],t.qty,void 0,{number:!0}]]),Object(o["createVNode"])("div",C," / "+Object(o["toDisplayString"])(t.product.unit),1)])]),Object(o["createVNode"])("td",x,[Q.cart.final_total!==Q.cart.total?(Object(o["openBlock"])(),Object(o["createBlock"])("small",B,"折扣價：")):Object(o["createCommentVNode"])("",!0),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.$filters.currency(t.final_total)),1)])])})),128)):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("tfoot",null,[Object(o["createVNode"])("tr",null,[w,Object(o["createVNode"])("td",I,Object(o["toDisplayString"])(e.$filters.currency(Q.cart.total)),1)]),Q.cart.final_total!==Q.cart.total?(Object(o["openBlock"])(),Object(o["createBlock"])("tr",L,[_,Object(o["createVNode"])("td",S,Object(o["toDisplayString"])(e.$filters.currency(Q.cart.final_total)),1)])):Object(o["createCommentVNode"])("",!0)])]),Object(o["createVNode"])("div",$,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=function(e){return Q.coupon_code=e}),placeholder:"請輸入優惠碼"},null,512),[[o["vModelText"],Q.coupon_code]]),Object(o["createVNode"])("div",D,[Object(o["createVNode"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:t[2]||(t[2]=function(){return R.addCouponCode&&R.addCouponCode.apply(R,arguments)})}," 套用優惠碼 ")])])])])]),Object(o["createVNode"])("div",q,[Object(o["createVNode"])(ee,{class:"col-md-6",onSubmit:R.createOrder},{default:Object(o["withCtx"])((function(e){var c=e.errors;return[Object(o["createVNode"])("div",U,[M,Object(o["createVNode"])(Y,{id:"email",name:"email",type:"email",class:["form-control",{"is-invalid":c["email"]}],placeholder:"請輸入 Email",rules:"email|required",modelValue:Q.form.user.email,"onUpdate:modelValue":t[3]||(t[3]=function(e){return Q.form.user.email=e})},null,8,["class","modelValue"]),Object(o["createVNode"])(Z,{name:"email",class:"invalid-feedback"})]),Object(o["createVNode"])("div",T,[F,Object(o["createVNode"])(Y,{id:"name",name:"姓名",type:"text",class:["form-control",{"is-invalid":c["姓名"]}],placeholder:"請輸入姓名",rules:"required",modelValue:Q.form.user.name,"onUpdate:modelValue":t[4]||(t[4]=function(e){return Q.form.user.name=e})},null,8,["class","modelValue"]),Object(o["createVNode"])(Z,{name:"姓名",class:"invalid-feedback"})]),Object(o["createVNode"])("div",P,[E,Object(o["createVNode"])(Y,{id:"tel",name:"電話",type:"tel",class:["form-control",{"is-invalid":c["電話"]}],placeholder:"請輸入電話",rules:"required",modelValue:Q.form.user.tel,"onUpdate:modelValue":t[5]||(t[5]=function(e){return Q.form.user.tel=e})},null,8,["class","modelValue"]),Object(o["createVNode"])(Z,{name:"電話",class:"invalid-feedback"})]),Object(o["createVNode"])("div",J,[z,Object(o["createVNode"])(Y,{id:"address",name:"地址",type:"text",class:["form-control",{"is-invalid":c["地址"]}],placeholder:"請輸入地址",rules:"required",modelValue:Q.form.user.address,"onUpdate:modelValue":t[6]||(t[6]=function(e){return Q.form.user.address=e})},null,8,["class","modelValue"]),Object(o["createVNode"])(Z,{name:"地址",class:"invalid-feedback"})]),Object(o["createVNode"])("div",A,[G,Object(o["withDirectives"])(Object(o["createVNode"])("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[7]||(t[7]=function(e){return Q.form.message=e})},null,512),[[o["vModelText"],Q.form.message]])]),H]})),_:1},8,["onSubmit"])])])],64)}c("99af");var Q={data:function(){return{products:[],product:{},status:{loadingItem:""},form:{user:{name:"",email:"",tel:"",address:""},message:""},cart:{},coupon_code:""}},methods:{getProducts:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("a22031227","/products/all");this.isLoading=!0,this.$http.get(t).then((function(t){e.products=t.data.products,console.log("products:",t),e.isLoading=!1}))},getProduct:function(e){this.$router.push("/user/product/".concat(e))},addCart:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("a22031227","/cart");this.status.loadingItem=e;var o={product_id:e,qty:1};this.$http.post(c,{data:o}).then((function(e){t.status.loadingItem="",console.log(e),t.getCart()}))},getCart:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("a22031227","/cart");this.isLoading=!0,this.$http.get(t).then((function(t){console.log(t),e.cart=t.data.data,e.isLoading=!1}))},updateCart:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("a22031227","/cart/").concat(e.id);this.isLoading=!0,this.status.loadingItem=e.id;var o={product_id:e.product_id,qty:e.qty};this.$http.put(c,{data:o}).then((function(e){console.log(e),t.status.loadingItem="",t.getCart()}))},removeCartItem:function(e){var t=this;this.status.loadingItem=e;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("a22031227","/cart/").concat(e);this.isLoading=!0,this.$http.delete(c).then((function(e){t.$httpMsgState(e,"移除購物車品項"),t.status.loadingItem="",t.getCart(),t.isLoading=!1}))},addCouponCode:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("a22031227","/coupon"),c={code:this.coupon_code};this.isLoading=!0,this.$http.post(t,{data:c}).then((function(t){e.$httpMsgState(t,"加入優惠券"),e.getCart(),e.isLoading=!1}))},createOrder:function(){var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("a22031227","/order"),t=this.form;this.$http.post(e,{data:t}).then((function(e){console.log(e)}))}},created:function(){this.getProducts(),this.getCart()}};Q.render=K;t["default"]=Q}}]);
//# sourceMappingURL=chunk-2d0c7b31.aa44ce42.js.map